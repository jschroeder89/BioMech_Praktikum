<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>ChibiOS/RT: Counting Semaphores</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="custom.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ChibiOS/RT
   &#160;<span id="projectnumber">4.0.4</span>
<script type="text/javascript"><!--
google_ad_client = "pub-3840594581853944";
/* Documentation, bottom, 728x90, created 9/19/10 */
google_ad_slot = "1902290615";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__semaphores.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Counting Semaphores<div class="ingroups"><a class="el" href="group__kernel.html">RT Kernel</a> &raquo; <a class="el" href="group__synchronization.html">Synchronization</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for Counting Semaphores:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__semaphores.png" border="0" alt="" usemap="#group____semaphores"/>
<map name="group____semaphores" id="group____semaphores">
<area shape="rect" id="node1" href="group__synchronization.html" title="Synchronization" alt="" coords="5,5,103,29"/>
</map>
</td></tr></table></center>
</div>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Semaphores related APIs and services. </p><h2>Operation mode</h2>
<p>Semaphores are a flexible synchronization primitive, ChibiOS/RT implements semaphores in their "counting semaphores" variant as defined by Edsger Dijkstra plus several enhancements like:</p><ul>
<li>Wait operation with timeout.</li>
<li>Reset operation.</li>
<li>Atomic wait+signal operation.</li>
<li>Return message from the wait operation (OK, RESET, TIMEOUT).</li>
</ul>
<p>The binary semaphores variant can be easily implemented using counting semaphores.<br />
 Operations defined for semaphores:</p><ul>
<li><b>Signal</b>: The semaphore counter is increased and if the result is non-positive then a waiting thread is removed from the semaphore queue and made ready for execution.</li>
<li><b>Wait</b>: The semaphore counter is decreased and if the result becomes negative the thread is queued in the semaphore and suspended.</li>
<li><b>Reset</b>: The semaphore counter is reset to a non-negative value and all the threads in the queue are released.</li>
</ul>
<p>Semaphores can be used as guards for mutual exclusion zones (note that mutexes are recommended for this kind of use) but also have other uses, queues guards and counters for example.<br />
 Semaphores usually use a FIFO queuing strategy but it is possible to make them order threads by priority by enabling <code>CH_CFG_USE_SEMAPHORES_PRIORITY</code> in <code><a class="el" href="chconf_8h.html" title="Configuration file template. ">chconf.h</a></code>. </p><dl class="section pre"><dt>Precondition</dt><dd>In order to use the semaphore APIs the <code>CH_CFG_USE_SEMAPHORES</code> option must be enabled in <code><a class="el" href="chconf_8h.html" title="Configuration file template. ">chconf.h</a></code>. </dd></dl>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga1100c867cc8bd8328f7a7db5e7c74f6d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#ga1100c867cc8bd8328f7a7db5e7c74f6d">_SEMAPHORE_DATA</a>(name,  n)&#160;&#160;&#160;{<a class="el" href="group__threads.html#ga0d2fbf3711698f10ec5378bb64fad7ea">_THREADS_QUEUE_DATA</a>(name.queue), n}</td></tr>
<tr class="memdesc:ga1100c867cc8bd8328f7a7db5e7c74f6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data part of a static semaphore initializer.  <a href="#ga1100c867cc8bd8328f7a7db5e7c74f6d">More...</a><br /></td></tr>
<tr class="separator:ga1100c867cc8bd8328f7a7db5e7c74f6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac09ac6a24cd3dbe91ac13d72bebf67c1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#gac09ac6a24cd3dbe91ac13d72bebf67c1">SEMAPHORE_DECL</a>(name,  n)&#160;&#160;&#160;<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> name = <a class="el" href="group__semaphores.html#ga1100c867cc8bd8328f7a7db5e7c74f6d">_SEMAPHORE_DATA</a>(name, n)</td></tr>
<tr class="memdesc:gac09ac6a24cd3dbe91ac13d72bebf67c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Static semaphore initializer.  <a href="#gac09ac6a24cd3dbe91ac13d72bebf67c1">More...</a><br /></td></tr>
<tr class="separator:gac09ac6a24cd3dbe91ac13d72bebf67c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga4f26122d58193cfe4b994bff6c640ae7"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structch__semaphore.html">ch_semaphore</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a></td></tr>
<tr class="memdesc:ga4f26122d58193cfe4b994bff6c640ae7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Semaphore structure.  <a href="#ga4f26122d58193cfe4b994bff6c640ae7">More...</a><br /></td></tr>
<tr class="separator:ga4f26122d58193cfe4b994bff6c640ae7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structch__semaphore.html">ch_semaphore</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Semaphore structure.  <a href="structch__semaphore.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga6c1812ffb36357295cd22670a10ff694"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#ga6c1812ffb36357295cd22670a10ff694">chSemObjectInit</a> (<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *sp, cnt_t n)</td></tr>
<tr class="memdesc:ga6c1812ffb36357295cd22670a10ff694"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a semaphore with the specified counter value.  <a href="#ga6c1812ffb36357295cd22670a10ff694">More...</a><br /></td></tr>
<tr class="separator:ga6c1812ffb36357295cd22670a10ff694"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2c454835402cf7adb27858fdbc50b1f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#ga2c454835402cf7adb27858fdbc50b1f4">chSemReset</a> (<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *sp, cnt_t n)</td></tr>
<tr class="memdesc:ga2c454835402cf7adb27858fdbc50b1f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a reset operation on the semaphore.  <a href="#ga2c454835402cf7adb27858fdbc50b1f4">More...</a><br /></td></tr>
<tr class="separator:ga2c454835402cf7adb27858fdbc50b1f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga78031350aa8122623450f0679d80e3f9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#ga78031350aa8122623450f0679d80e3f9">chSemResetI</a> (<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *sp, cnt_t n)</td></tr>
<tr class="memdesc:ga78031350aa8122623450f0679d80e3f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a reset operation on the semaphore.  <a href="#ga78031350aa8122623450f0679d80e3f9">More...</a><br /></td></tr>
<tr class="separator:ga78031350aa8122623450f0679d80e3f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga777095a8be86b46658a08e3c0a65957e"><td class="memItemLeft" align="right" valign="top">msg_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#ga777095a8be86b46658a08e3c0a65957e">chSemWait</a> (<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *sp)</td></tr>
<tr class="memdesc:ga777095a8be86b46658a08e3c0a65957e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a wait operation on a semaphore.  <a href="#ga777095a8be86b46658a08e3c0a65957e">More...</a><br /></td></tr>
<tr class="separator:ga777095a8be86b46658a08e3c0a65957e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7ddfa2a780e98c87891e657867b49ab6"><td class="memItemLeft" align="right" valign="top">msg_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#ga7ddfa2a780e98c87891e657867b49ab6">chSemWaitS</a> (<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *sp)</td></tr>
<tr class="memdesc:ga7ddfa2a780e98c87891e657867b49ab6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a wait operation on a semaphore.  <a href="#ga7ddfa2a780e98c87891e657867b49ab6">More...</a><br /></td></tr>
<tr class="separator:ga7ddfa2a780e98c87891e657867b49ab6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga21a98f5f1c64c8b42d5b07968bae3b77"><td class="memItemLeft" align="right" valign="top">msg_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#ga21a98f5f1c64c8b42d5b07968bae3b77">chSemWaitTimeout</a> (<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *sp, <a class="el" href="group__scheduler.html#gae3e32a98d431a02106616da3071832dd">systime_t</a> time)</td></tr>
<tr class="memdesc:ga21a98f5f1c64c8b42d5b07968bae3b77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a wait operation on a semaphore with timeout specification.  <a href="#ga21a98f5f1c64c8b42d5b07968bae3b77">More...</a><br /></td></tr>
<tr class="separator:ga21a98f5f1c64c8b42d5b07968bae3b77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7102a34d788df1a46845b8d794d475f6"><td class="memItemLeft" align="right" valign="top">msg_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#ga7102a34d788df1a46845b8d794d475f6">chSemWaitTimeoutS</a> (<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *sp, <a class="el" href="group__scheduler.html#gae3e32a98d431a02106616da3071832dd">systime_t</a> time)</td></tr>
<tr class="memdesc:ga7102a34d788df1a46845b8d794d475f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a wait operation on a semaphore with timeout specification.  <a href="#ga7102a34d788df1a46845b8d794d475f6">More...</a><br /></td></tr>
<tr class="separator:ga7102a34d788df1a46845b8d794d475f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga20caa503d05082ff45be32c1dd68bd52"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#ga20caa503d05082ff45be32c1dd68bd52">chSemSignal</a> (<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *sp)</td></tr>
<tr class="memdesc:ga20caa503d05082ff45be32c1dd68bd52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a signal operation on a semaphore.  <a href="#ga20caa503d05082ff45be32c1dd68bd52">More...</a><br /></td></tr>
<tr class="separator:ga20caa503d05082ff45be32c1dd68bd52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf379805c91e541ebb778047803bd1cee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#gaf379805c91e541ebb778047803bd1cee">chSemSignalI</a> (<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *sp)</td></tr>
<tr class="memdesc:gaf379805c91e541ebb778047803bd1cee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a signal operation on a semaphore.  <a href="#gaf379805c91e541ebb778047803bd1cee">More...</a><br /></td></tr>
<tr class="separator:gaf379805c91e541ebb778047803bd1cee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga06d744fbb04db7269f9620d2e6ef0a44"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#ga06d744fbb04db7269f9620d2e6ef0a44">chSemAddCounterI</a> (<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *sp, cnt_t n)</td></tr>
<tr class="memdesc:ga06d744fbb04db7269f9620d2e6ef0a44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds the specified value to the semaphore counter.  <a href="#ga06d744fbb04db7269f9620d2e6ef0a44">More...</a><br /></td></tr>
<tr class="separator:ga06d744fbb04db7269f9620d2e6ef0a44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga120d7454bac6a3a7c7a336353fbf5fca"><td class="memItemLeft" align="right" valign="top">msg_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#ga120d7454bac6a3a7c7a336353fbf5fca">chSemSignalWait</a> (<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *sps, <a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *spw)</td></tr>
<tr class="memdesc:ga120d7454bac6a3a7c7a336353fbf5fca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs atomic signal and wait operations on two semaphores.  <a href="#ga120d7454bac6a3a7c7a336353fbf5fca">More...</a><br /></td></tr>
<tr class="separator:ga120d7454bac6a3a7c7a336353fbf5fca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabf1864766da833070d61948d67a190a0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#gabf1864766da833070d61948d67a190a0">chSemFastWaitI</a> (<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *sp)</td></tr>
<tr class="memdesc:gabf1864766da833070d61948d67a190a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decreases the semaphore counter.  <a href="#gabf1864766da833070d61948d67a190a0">More...</a><br /></td></tr>
<tr class="separator:gabf1864766da833070d61948d67a190a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafd391434ff5b76cefc85743bda9f55af"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#gafd391434ff5b76cefc85743bda9f55af">chSemFastSignalI</a> (<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *sp)</td></tr>
<tr class="memdesc:gafd391434ff5b76cefc85743bda9f55af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increases the semaphore counter.  <a href="#gafd391434ff5b76cefc85743bda9f55af">More...</a><br /></td></tr>
<tr class="separator:gafd391434ff5b76cefc85743bda9f55af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1e697ab9410741a5f8718fc59c3f3e1c"><td class="memItemLeft" align="right" valign="top">static cnt_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#ga1e697ab9410741a5f8718fc59c3f3e1c">chSemGetCounterI</a> (<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *sp)</td></tr>
<tr class="memdesc:ga1e697ab9410741a5f8718fc59c3f3e1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the semaphore counter current value.  <a href="#ga1e697ab9410741a5f8718fc59c3f3e1c">More...</a><br /></td></tr>
<tr class="separator:ga1e697ab9410741a5f8718fc59c3f3e1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga1100c867cc8bd8328f7a7db5e7c74f6d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _SEMAPHORE_DATA</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">n&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;{<a class="el" href="group__threads.html#ga0d2fbf3711698f10ec5378bb64fad7ea">_THREADS_QUEUE_DATA</a>(name.queue), n}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Data part of a static semaphore initializer. </p>
<p>This macro should be used when statically initializing a semaphore that is part of a bigger structure.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>the name of the semaphore variable </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>the counter initial value, this value must be non-negative </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="chsem_8h_source.html#l00071">71</a> of file <a class="el" href="chsem_8h_source.html">chsem.h</a>.</p>

</div>
</div>
<a class="anchor" id="gac09ac6a24cd3dbe91ac13d72bebf67c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEMAPHORE_DECL</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">n&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> name = <a class="el" href="group__semaphores.html#ga1100c867cc8bd8328f7a7db5e7c74f6d">_SEMAPHORE_DATA</a>(name, n)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Static semaphore initializer. </p>
<p>Statically initialized semaphores require no explicit initialization using <code>chSemInit()</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>the name of the semaphore variable </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>the counter initial value, this value must be non-negative </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="chsem_8h_source.html#l00082">82</a> of file <a class="el" href="chsem_8h_source.html">chsem.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ga4f26122d58193cfe4b994bff6c640ae7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structch__semaphore.html">ch_semaphore</a>  <a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Semaphore structure. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga6c1812ffb36357295cd22670a10ff694"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void chSemObjectInit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cnt_t&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes a semaphore with the specified counter value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">sp</td><td>pointer to a <code>semaphore_t</code> structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>initial value of the semaphore counter. Must be non-negative.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Initializer, this function just initializes an object and can be invoked before the kernel is initialized. </dd></dl>

<p>Definition at line <a class="el" href="chsem_8c_source.html#l00097">97</a> of file <a class="el" href="chsem_8c_source.html">chsem.c</a>.</p>

<p>References <a class="el" href="group__debug.html#ga3d40b3669f5280264c24dae4a2565ff2">chDbgCheck</a>, <a class="el" href="structch__semaphore.html#aa855718bb5d5fe25ef00938d5f8bce50">ch_semaphore::cnt</a>, <a class="el" href="structch__semaphore.html#af7e3ab25d2bc8771174876f1cae544fb">ch_semaphore::queue</a>, and <a class="el" href="group__scheduler.html#ga79bee2577cd8ba9850c8c3d20ea33d30">queue_init()</a>.</p>

<p>Referenced by <a class="el" href="group__heaps.html#ga777708769d35996ed5f0d8bd4642217c">_heap_init()</a>, <a class="el" href="group__binary__semaphores.html#ga05b6421b81750072637a497c76d79678">chBSemObjectInit()</a>, <a class="el" href="group__pools.html#gae92357daa8efe032b465df387d5283ca">chGuardedPoolObjectInit()</a>, and <a class="el" href="group__heaps.html#ga39b00c3aeea2e08e160f6018124b6001">chHeapObjectInit()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__semaphores_ga6c1812ffb36357295cd22670a10ff694_cgraph.png" border="0" usemap="#group__semaphores_ga6c1812ffb36357295cd22670a10ff694_cgraph" alt=""/></div>
<map name="group__semaphores_ga6c1812ffb36357295cd22670a10ff694_cgraph" id="group__semaphores_ga6c1812ffb36357295cd22670a10ff694_cgraph">
<area shape="rect" id="node2" href="group__scheduler.html#ga79bee2577cd8ba9850c8c3d20ea33d30" title="Threads queue initialization. " alt="" coords="152,5,223,29"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga2c454835402cf7adb27858fdbc50b1f4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void chSemReset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cnt_t&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a reset operation on the semaphore. </p>
<dl class="section post"><dt>Postcondition</dt><dd>After invoking this function all the threads waiting on the semaphore, if any, are released and the semaphore counter is set to the specified, non negative, value. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>The released threads can recognize they were waked up by a reset rather than a signal because the <code><a class="el" href="group__semaphores.html#ga777095a8be86b46658a08e3c0a65957e" title="Performs a wait operation on a semaphore. ">chSemWait()</a></code> will return <code>MSG_RESET</code> instead of <code>MSG_OK</code>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sp</td><td>pointer to a <code>semaphore_t</code> structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>the new value of the semaphore counter. The value must be non-negative.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Normal API, this function can be invoked by regular system threads but not from within a lock zone. </dd></dl>

<p>Definition at line <a class="el" href="chsem_8c_source.html#l00120">120</a> of file <a class="el" href="chsem_8c_source.html">chsem.c</a>.</p>

<p>References <a class="el" href="group__scheduler.html#ga4e38b4bee3d2330f6a0f1cdb7660af20">chSchRescheduleS()</a>, <a class="el" href="group__semaphores.html#ga78031350aa8122623450f0679d80e3f9">chSemResetI()</a>, <a class="el" href="group__system.html#ga464ae8092ca266ea0abffeb4c5639c8e">chSysLock()</a>, and <a class="el" href="group__system.html#gae3429d88fe6a75de02af1a089b9f620b">chSysUnlock()</a>.</p>

<p>Referenced by <a class="el" href="group__binary__semaphores.html#ga15c30fb6686093f0fe4c8c16f36ade5c">chBSemReset()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__semaphores_ga2c454835402cf7adb27858fdbc50b1f4_cgraph.png" border="0" usemap="#group__semaphores_ga2c454835402cf7adb27858fdbc50b1f4_cgraph" alt=""/></div>
<map name="group__semaphores_ga2c454835402cf7adb27858fdbc50b1f4_cgraph" id="group__semaphores_ga2c454835402cf7adb27858fdbc50b1f4_cgraph">
<area shape="rect" id="node2" href="group__scheduler.html#ga4e38b4bee3d2330f6a0f1cdb7660af20" title="Performs a reschedule if a higher priority thread is runnable. " alt="" coords="276,55,391,79"/>
<area shape="rect" id="node6" href="group__semaphores.html#ga78031350aa8122623450f0679d80e3f9" title="Performs a reset operation on the semaphore. " alt="" coords="136,227,223,251"/>
<area shape="rect" id="node12" href="group__system.html#ga464ae8092ca266ea0abffeb4c5639c8e" title="Enters the kernel lock state. " alt="" coords="143,349,215,373"/>
<area shape="rect" id="node15" href="group__system.html#gae3429d88fe6a75de02af1a089b9f620b" title="Leaves the kernel lock state. " alt="" coords="138,459,221,483"/>
<area shape="rect" id="node3" href="group__debug.html#ga14fe880e1dbd127d46077a1d300b1167" title="S&#45;class functions context check. " alt="" coords="644,80,760,104"/>
<area shape="rect" id="node4" href="group__scheduler.html#ga6827a67e839462e65b5765ef15709c97" title="Switches to the first thread on the runnable queue. " alt="" coords="444,5,596,29"/>
<area shape="rect" id="node5" href="group__scheduler.html#ga5d015074bf0c8105077bcd986a996f63" title="Determines if the current thread must reschedule. " alt="" coords="455,104,585,128"/>
<area shape="rect" id="node7" href="group__debug.html#ga3e4782dccbb385051e1eb01ac5b05470" title="I&#45;class functions context check. " alt="" coords="464,152,576,176"/>
<area shape="rect" id="node8" href="group__scheduler.html#gaf2447f9565ba6ddcecc9b5622885ae50" title="Evaluates to true if the specified threads queue is empty. " alt="" coords="286,251,381,275"/>
<area shape="rect" id="node9" href="group__scheduler.html#ga61aefe3e3bf61cad481289ad6b59071e" title="Evaluates to true if the specified threads queue is not empty. " alt="" coords="282,104,385,128"/>
<area shape="rect" id="node10" href="group__scheduler.html#gaa29f30122c114fd0ea21e16b68ef1710" title="Removes the last&#45;out thread from a queue and returns it. " alt="" coords="463,249,577,273"/>
<area shape="rect" id="node11" href="group__scheduler.html#ga74665c643003d2094a5c337a6857035e" title="Inserts a thread in the Ready List placing it behind its peers. " alt="" coords="291,152,376,176"/>
<area shape="rect" id="node13" href="group__debug.html#gaae453ff2b98bb0711c081c0496615250" title="Guard code for chSysLock(). " alt="" coords="282,349,385,373"/>
<area shape="rect" id="node14" href="group__statistics.html#ga813c62177261b1b03a87ba209409b44b" title="Starts the measurement of a thread critical zone. " alt="" coords="271,398,396,434"/>
<area shape="rect" id="node16" href="group__debug.html#gafdb3c25c67ce61bb8ed7a9121365b71c" title="Guard code for chSysUnlock(). " alt="" coords="276,459,391,483"/>
<area shape="rect" id="node17" href="group__statistics.html#gadd818821c119157b1ea6cd399ee4e647" title="Stops the measurement of a thread critical zone. " alt="" coords="271,507,395,543"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga78031350aa8122623450f0679d80e3f9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void chSemResetI </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cnt_t&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a reset operation on the semaphore. </p>
<dl class="section post"><dt>Postcondition</dt><dd>After invoking this function all the threads waiting on the semaphore, if any, are released and the semaphore counter is set to the specified, non negative, value. </dd>
<dd>
This function does not reschedule so a call to a rescheduling function must be performed before unlocking the kernel. Note that interrupt handlers always reschedule on exit so an explicit reschedule must not be performed in ISRs. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>The released threads can recognize they were waked up by a reset rather than a signal because the <code><a class="el" href="group__semaphores.html#ga777095a8be86b46658a08e3c0a65957e" title="Performs a wait operation on a semaphore. ">chSemWait()</a></code> will return <code>MSG_RESET</code> instead of <code>MSG_OK</code>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sp</td><td>pointer to a <code>semaphore_t</code> structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>the new value of the semaphore counter. The value must be non-negative.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>This is an <b>I-Class</b> API, this function can be invoked from within a system lock zone by both threads and interrupt handlers. </dd></dl>

<p>Definition at line <a class="el" href="chsem_8c_source.html#l00147">147</a> of file <a class="el" href="chsem_8c_source.html">chsem.c</a>.</p>

<p>References <a class="el" href="group__debug.html#ga05556bc6888b5ff5ec4edcaf4830addc">chDbgAssert</a>, <a class="el" href="group__debug.html#ga3d40b3669f5280264c24dae4a2565ff2">chDbgCheck</a>, <a class="el" href="group__debug.html#ga3e4782dccbb385051e1eb01ac5b05470">chDbgCheckClassI()</a>, <a class="el" href="group__scheduler.html#ga74665c643003d2094a5c337a6857035e">chSchReadyI()</a>, <a class="el" href="structch__semaphore.html#aa855718bb5d5fe25ef00938d5f8bce50">ch_semaphore::cnt</a>, <a class="el" href="group__scheduler.html#gad6d35939ad017e7079f70776f2e9f1d5">MSG_RESET</a>, <a class="el" href="structch__semaphore.html#af7e3ab25d2bc8771174876f1cae544fb">ch_semaphore::queue</a>, <a class="el" href="group__scheduler.html#gaf2447f9565ba6ddcecc9b5622885ae50">queue_isempty()</a>, <a class="el" href="group__scheduler.html#gaa29f30122c114fd0ea21e16b68ef1710">queue_lifo_remove()</a>, <a class="el" href="group__scheduler.html#ga61aefe3e3bf61cad481289ad6b59071e">queue_notempty()</a>, <a class="el" href="structch__thread.html#a1553a02a32b6903a20ed46fbb8e22023">ch_thread::rdymsg</a>, and <a class="el" href="structch__thread.html#accc303ba6a19458cf6a773c3a0b3cc99">ch_thread::u</a>.</p>

<p>Referenced by <a class="el" href="group__binary__semaphores.html#ga28b54b20c0cd0b0ccb7f90ff2720e0b9">chBSemResetI()</a>, and <a class="el" href="group__semaphores.html#ga2c454835402cf7adb27858fdbc50b1f4">chSemReset()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__semaphores_ga78031350aa8122623450f0679d80e3f9_cgraph.png" border="0" usemap="#group__semaphores_ga78031350aa8122623450f0679d80e3f9_cgraph" alt=""/></div>
<map name="group__semaphores_ga78031350aa8122623450f0679d80e3f9_cgraph" id="group__semaphores_ga78031350aa8122623450f0679d80e3f9_cgraph">
<area shape="rect" id="node2" href="group__debug.html#ga3e4782dccbb385051e1eb01ac5b05470" title="I&#45;class functions context check. " alt="" coords="300,11,412,35"/>
<area shape="rect" id="node4" href="group__scheduler.html#ga74665c643003d2094a5c337a6857035e" title="Inserts a thread in the Ready List placing it behind its peers. " alt="" coords="149,5,234,29"/>
<area shape="rect" id="node5" href="group__scheduler.html#gaf2447f9565ba6ddcecc9b5622885ae50" title="Evaluates to true if the specified threads queue is empty. " alt="" coords="144,275,239,299"/>
<area shape="rect" id="node7" href="group__scheduler.html#gaa29f30122c114fd0ea21e16b68ef1710" title="Removes the last&#45;out thread from a queue and returns it. " alt="" coords="299,59,413,83"/>
<area shape="rect" id="node8" href="group__scheduler.html#ga61aefe3e3bf61cad481289ad6b59071e" title="Evaluates to true if the specified threads queue is not empty. " alt="" coords="140,155,243,179"/>
<area shape="rect" id="node3" href="group__system.html#gaffab4052111407f092c7c65466a61450" title="Halts the system. " alt="" coords="469,11,539,35"/>
<area shape="rect" id="node6" href="group__scheduler.html#gab9b2132009ba2cef65d3fca0cfb354ef" title="Pushes a thread_t on top of a stack list. " alt="" coords="323,347,389,371"/>
<area shape="rect" id="node9" href="group__scheduler.html#ga5d015074bf0c8105077bcd986a996f63" title="Determines if the current thread must reschedule. " alt="" coords="291,299,421,323"/>
<area shape="rect" id="node10" href="group__scheduler.html#ga2061d80ce782ea1c9822d158d7ae88b4" title="Removes a thread from a queue and returns it. " alt="" coords="306,107,406,131"/>
<area shape="rect" id="node11" href="group__scheduler.html#gaa664d185361931ac4c38b7b01af92ff2" title="Removes the first&#45;out thread from a queue and returns it. " alt="" coords="299,155,413,179"/>
<area shape="rect" id="node12" href="group__scheduler.html#ga282dd3f6ff79dd20e251e413e2b9915d" title="Inserts a thread into a queue. " alt="" coords="314,203,398,227"/>
<area shape="rect" id="node13" href="group__scheduler.html#ga77b181c31a97a1b724cee544718805fd" title="Inserts a thread into a priority ordered queue. " alt="" coords="302,251,410,275"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga777095a8be86b46658a08e3c0a65957e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">msg_t chSemWait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>sp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a wait operation on a semaphore. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sp</td><td>pointer to a <code>semaphore_t</code> structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A message specifying how the invoking thread has been released from the semaphore. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MSG_OK</td><td>if the thread has not stopped on the semaphore or the semaphore has been signaled. </td></tr>
    <tr><td class="paramname">MSG_RESET</td><td>if the semaphore has been reset using <code><a class="el" href="group__semaphores.html#ga2c454835402cf7adb27858fdbc50b1f4" title="Performs a reset operation on the semaphore. ">chSemReset()</a></code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Normal API, this function can be invoked by regular system threads but not from within a lock zone. </dd></dl>

<p>Definition at line <a class="el" href="chsem_8c_source.html#l00175">175</a> of file <a class="el" href="chsem_8c_source.html">chsem.c</a>.</p>

<p>References <a class="el" href="group__semaphores.html#ga7ddfa2a780e98c87891e657867b49ab6">chSemWaitS()</a>, <a class="el" href="group__system.html#ga464ae8092ca266ea0abffeb4c5639c8e">chSysLock()</a>, and <a class="el" href="group__system.html#gae3429d88fe6a75de02af1a089b9f620b">chSysUnlock()</a>.</p>

<p>Referenced by <a class="el" href="group__binary__semaphores.html#gad52f5ce37d73b6d166906503b6ec7f9e">chBSemWait()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__semaphores_ga777095a8be86b46658a08e3c0a65957e_cgraph.png" border="0" usemap="#group__semaphores_ga777095a8be86b46658a08e3c0a65957e_cgraph" alt=""/></div>
<map name="group__semaphores_ga777095a8be86b46658a08e3c0a65957e_cgraph" id="group__semaphores_ga777095a8be86b46658a08e3c0a65957e_cgraph">
<area shape="rect" id="node2" href="group__semaphores.html#ga7ddfa2a780e98c87891e657867b49ab6" title="Performs a wait operation on a semaphore. " alt="" coords="129,77,212,101"/>
<area shape="rect" id="node7" href="group__system.html#ga464ae8092ca266ea0abffeb4c5639c8e" title="Enters the kernel lock state. " alt="" coords="135,201,207,225"/>
<area shape="rect" id="node10" href="group__system.html#gae3429d88fe6a75de02af1a089b9f620b" title="Leaves the kernel lock state. " alt="" coords="129,283,212,307"/>
<area shape="rect" id="node3" href="group__debug.html#ga14fe880e1dbd127d46077a1d300b1167" title="S&#45;class functions context check. " alt="" coords="433,53,549,77"/>
<area shape="rect" id="node4" href="group__scheduler.html#gaf2447f9565ba6ddcecc9b5622885ae50" title="Evaluates to true if the specified threads queue is empty. " alt="" coords="275,29,370,53"/>
<area shape="rect" id="node5" href="group__scheduler.html#ga61aefe3e3bf61cad481289ad6b59071e" title="Evaluates to true if the specified threads queue is not empty. " alt="" coords="271,77,374,101"/>
<area shape="rect" id="node6" href="group__scheduler.html#ga97c1c514b755a1e71caf2f19c1ccf986" title="Puts the current thread to sleep into the specified state. " alt="" coords="273,125,372,149"/>
<area shape="rect" id="node8" href="group__debug.html#gaae453ff2b98bb0711c081c0496615250" title="Guard code for chSysLock(). " alt="" coords="271,173,374,197"/>
<area shape="rect" id="node9" href="group__statistics.html#ga813c62177261b1b03a87ba209409b44b" title="Starts the measurement of a thread critical zone. " alt="" coords="260,222,385,258"/>
<area shape="rect" id="node11" href="group__debug.html#gafdb3c25c67ce61bb8ed7a9121365b71c" title="Guard code for chSysUnlock(). " alt="" coords="265,283,380,307"/>
<area shape="rect" id="node12" href="group__statistics.html#gadd818821c119157b1ea6cd399ee4e647" title="Stops the measurement of a thread critical zone. " alt="" coords="261,331,385,367"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga7ddfa2a780e98c87891e657867b49ab6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">msg_t chSemWaitS </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>sp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a wait operation on a semaphore. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sp</td><td>pointer to a <code>semaphore_t</code> structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A message specifying how the invoking thread has been released from the semaphore. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MSG_OK</td><td>if the thread has not stopped on the semaphore or the semaphore has been signaled. </td></tr>
    <tr><td class="paramname">MSG_RESET</td><td>if the semaphore has been reset using <code><a class="el" href="group__semaphores.html#ga2c454835402cf7adb27858fdbc50b1f4" title="Performs a reset operation on the semaphore. ">chSemReset()</a></code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>This is an <b>S-Class</b> API, this function can be invoked from within a system lock zone by threads only. </dd></dl>

<p>Definition at line <a class="el" href="chsem_8c_source.html#l00197">197</a> of file <a class="el" href="chsem_8c_source.html">chsem.c</a>.</p>

<p>References <a class="el" href="group__scheduler.html#gafac108c3eb9f74fe26cdd41709737058">CH_STATE_WTSEM</a>, <a class="el" href="group__debug.html#ga05556bc6888b5ff5ec4edcaf4830addc">chDbgAssert</a>, <a class="el" href="group__debug.html#ga3d40b3669f5280264c24dae4a2565ff2">chDbgCheck</a>, <a class="el" href="group__debug.html#ga14fe880e1dbd127d46077a1d300b1167">chDbgCheckClassS()</a>, <a class="el" href="group__scheduler.html#ga97c1c514b755a1e71caf2f19c1ccf986">chSchGoSleepS()</a>, <a class="el" href="structch__semaphore.html#aa855718bb5d5fe25ef00938d5f8bce50">ch_semaphore::cnt</a>, <a class="el" href="group__scheduler.html#ga1a5fddde56420e8accd0c09c1abb32a7">currp</a>, <a class="el" href="group__scheduler.html#ga4ff2533d4f42b5b10b6caf648a4619b4">MSG_OK</a>, <a class="el" href="structch__semaphore.html#af7e3ab25d2bc8771174876f1cae544fb">ch_semaphore::queue</a>, <a class="el" href="group__scheduler.html#gaf2447f9565ba6ddcecc9b5622885ae50">queue_isempty()</a>, and <a class="el" href="group__scheduler.html#ga61aefe3e3bf61cad481289ad6b59071e">queue_notempty()</a>.</p>

<p>Referenced by <a class="el" href="group__binary__semaphores.html#gadf1d60a375f93639c4ade9658d10f987">chBSemWaitS()</a>, and <a class="el" href="group__semaphores.html#ga777095a8be86b46658a08e3c0a65957e">chSemWait()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__semaphores_ga7ddfa2a780e98c87891e657867b49ab6_cgraph.png" border="0" usemap="#group__semaphores_ga7ddfa2a780e98c87891e657867b49ab6_cgraph" alt=""/></div>
<map name="group__semaphores_ga7ddfa2a780e98c87891e657867b49ab6_cgraph" id="group__semaphores_ga7ddfa2a780e98c87891e657867b49ab6_cgraph">
<area shape="rect" id="node2" href="group__debug.html#ga14fe880e1dbd127d46077a1d300b1167" title="S&#45;class functions context check. " alt="" coords="465,467,581,491"/>
<area shape="rect" id="node4" href="group__scheduler.html#ga97c1c514b755a1e71caf2f19c1ccf986" title="Puts the current thread to sleep into the specified state. " alt="" coords="138,175,237,199"/>
<area shape="rect" id="node12" href="group__scheduler.html#gaf2447f9565ba6ddcecc9b5622885ae50" title="Evaluates to true if the specified threads queue is empty. " alt="" coords="140,637,235,661"/>
<area shape="rect" id="node14" href="group__scheduler.html#ga61aefe3e3bf61cad481289ad6b59071e" title="Evaluates to true if the specified threads queue is not empty. " alt="" coords="136,419,239,443"/>
<area shape="rect" id="node3" href="group__system.html#gaffab4052111407f092c7c65466a61450" title="Halts the system. " alt="" coords="629,321,699,345"/>
<area shape="rect" id="node5" href="group__scheduler.html#ga74665c643003d2094a5c337a6857035e" title="Inserts a thread in the Ready List placing it behind its peers. " alt="" coords="309,149,395,173"/>
<area shape="rect" id="node7" href="group__semaphores.html#gafd391434ff5b76cefc85743bda9f55af" title="Increases the semaphore counter. " alt="" coords="298,101,406,125"/>
<area shape="rect" id="node8" href="group__system.html#gac27f5c62e47e62fbb3585c65110addeb" title="Enters the kernel lock state from within an interrupt handler. " alt="" coords="294,5,410,29"/>
<area shape="rect" id="node9" href="group__system.html#ga459aa0a2901f0b19c7cf1d39172e4f53" title="Leaves the kernel lock state from within an interrupt handler. " alt="" coords="289,53,415,77"/>
<area shape="rect" id="node10" href="group__scheduler.html#ga2061d80ce782ea1c9822d158d7ae88b4" title="Removes a thread from a queue and returns it. " alt="" coords="302,248,402,272"/>
<area shape="rect" id="node11" href="group__scheduler.html#gaa664d185361931ac4c38b7b01af92ff2" title="Removes the first&#45;out thread from a queue and returns it. " alt="" coords="295,296,409,320"/>
<area shape="rect" id="node6" href="group__debug.html#ga3e4782dccbb385051e1eb01ac5b05470" title="I&#45;class functions context check. " alt="" coords="467,248,579,272"/>
<area shape="rect" id="node13" href="group__scheduler.html#gab9b2132009ba2cef65d3fca0cfb354ef" title="Pushes a thread_t on top of a stack list. " alt="" coords="319,637,385,661"/>
<area shape="rect" id="node15" href="group__scheduler.html#ga5d015074bf0c8105077bcd986a996f63" title="Determines if the current thread must reschedule. " alt="" coords="287,539,417,563"/>
<area shape="rect" id="node16" href="group__scheduler.html#ga282dd3f6ff79dd20e251e413e2b9915d" title="Inserts a thread into a queue. " alt="" coords="310,443,394,467"/>
<area shape="rect" id="node17" href="group__scheduler.html#gaa29f30122c114fd0ea21e16b68ef1710" title="Removes the last&#45;out thread from a queue and returns it. " alt="" coords="295,491,409,515"/>
<area shape="rect" id="node18" href="group__scheduler.html#ga77b181c31a97a1b724cee544718805fd" title="Inserts a thread into a priority ordered queue. " alt="" coords="298,395,406,419"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga21a98f5f1c64c8b42d5b07968bae3b77"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">msg_t chSemWaitTimeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__scheduler.html#gae3e32a98d431a02106616da3071832dd">systime_t</a>&#160;</td>
          <td class="paramname"><em>time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a wait operation on a semaphore with timeout specification. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sp</td><td>pointer to a <code>semaphore_t</code> structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">time</td><td>the number of ticks before the operation timeouts, the following special values are allowed:<ul>
<li><em>TIME_IMMEDIATE</em> immediate timeout.</li>
<li><em>TIME_INFINITE</em> no timeout.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A message specifying how the invoking thread has been released from the semaphore. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MSG_OK</td><td>if the thread has not stopped on the semaphore or the semaphore has been signaled. </td></tr>
    <tr><td class="paramname">MSG_RESET</td><td>if the semaphore has been reset using <code><a class="el" href="group__semaphores.html#ga2c454835402cf7adb27858fdbc50b1f4" title="Performs a reset operation on the semaphore. ">chSemReset()</a></code>. </td></tr>
    <tr><td class="paramname">MSG_TIMEOUT</td><td>if the semaphore has not been signaled or reset within the specified timeout.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Normal API, this function can be invoked by regular system threads but not from within a lock zone. </dd></dl>

<p>Definition at line <a class="el" href="chsem_8c_source.html#l00235">235</a> of file <a class="el" href="chsem_8c_source.html">chsem.c</a>.</p>

<p>References <a class="el" href="group__semaphores.html#ga7102a34d788df1a46845b8d794d475f6">chSemWaitTimeoutS()</a>, <a class="el" href="group__system.html#ga464ae8092ca266ea0abffeb4c5639c8e">chSysLock()</a>, and <a class="el" href="group__system.html#gae3429d88fe6a75de02af1a089b9f620b">chSysUnlock()</a>.</p>

<p>Referenced by <a class="el" href="group__binary__semaphores.html#gad0d69fe7bb3829daee79620255f99d36">chBSemWaitTimeout()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__semaphores_ga21a98f5f1c64c8b42d5b07968bae3b77_cgraph.png" border="0" usemap="#group__semaphores_ga21a98f5f1c64c8b42d5b07968bae3b77_cgraph" alt=""/></div>
<map name="group__semaphores_ga21a98f5f1c64c8b42d5b07968bae3b77_cgraph" id="group__semaphores_ga21a98f5f1c64c8b42d5b07968bae3b77_cgraph">
<area shape="rect" id="node2" href="group__semaphores.html#ga7102a34d788df1a46845b8d794d475f6" title="Performs a wait operation on a semaphore with timeout specification. " alt="" coords="168,77,291,101"/>
<area shape="rect" id="node7" href="group__system.html#ga464ae8092ca266ea0abffeb4c5639c8e" title="Enters the kernel lock state. " alt="" coords="193,201,265,225"/>
<area shape="rect" id="node10" href="group__system.html#gae3429d88fe6a75de02af1a089b9f620b" title="Leaves the kernel lock state. " alt="" coords="188,283,271,307"/>
<area shape="rect" id="node3" href="group__debug.html#ga14fe880e1dbd127d46077a1d300b1167" title="S&#45;class functions context check. " alt="" coords="525,53,641,77"/>
<area shape="rect" id="node4" href="group__scheduler.html#gaf2447f9565ba6ddcecc9b5622885ae50" title="Evaluates to true if the specified threads queue is empty. " alt="" coords="361,29,455,53"/>
<area shape="rect" id="node5" href="group__scheduler.html#ga61aefe3e3bf61cad481289ad6b59071e" title="Evaluates to true if the specified threads queue is not empty. " alt="" coords="357,77,459,101"/>
<area shape="rect" id="node6" href="group__scheduler.html#ga306e564f678c1a39139639490c77e78b" title="Puts the current thread to sleep into the specified state with timeout specification. " alt="" coords="339,125,477,149"/>
<area shape="rect" id="node8" href="group__debug.html#gaae453ff2b98bb0711c081c0496615250" title="Guard code for chSysLock(). " alt="" coords="357,173,459,197"/>
<area shape="rect" id="node9" href="group__statistics.html#ga813c62177261b1b03a87ba209409b44b" title="Starts the measurement of a thread critical zone. " alt="" coords="345,222,471,258"/>
<area shape="rect" id="node11" href="group__debug.html#gafdb3c25c67ce61bb8ed7a9121365b71c" title="Guard code for chSysUnlock(). " alt="" coords="351,283,465,307"/>
<area shape="rect" id="node12" href="group__statistics.html#gadd818821c119157b1ea6cd399ee4e647" title="Stops the measurement of a thread critical zone. " alt="" coords="346,331,470,367"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga7102a34d788df1a46845b8d794d475f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">msg_t chSemWaitTimeoutS </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__scheduler.html#gae3e32a98d431a02106616da3071832dd">systime_t</a>&#160;</td>
          <td class="paramname"><em>time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a wait operation on a semaphore with timeout specification. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sp</td><td>pointer to a <code>semaphore_t</code> structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">time</td><td>the number of ticks before the operation timeouts, the following special values are allowed:<ul>
<li><em>TIME_IMMEDIATE</em> immediate timeout.</li>
<li><em>TIME_INFINITE</em> no timeout.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A message specifying how the invoking thread has been released from the semaphore. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MSG_OK</td><td>if the thread has not stopped on the semaphore or the semaphore has been signaled. </td></tr>
    <tr><td class="paramname">MSG_RESET</td><td>if the semaphore has been reset using <code><a class="el" href="group__semaphores.html#ga2c454835402cf7adb27858fdbc50b1f4" title="Performs a reset operation on the semaphore. ">chSemReset()</a></code>. </td></tr>
    <tr><td class="paramname">MSG_TIMEOUT</td><td>if the semaphore has not been signaled or reset within the specified timeout.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>This is an <b>S-Class</b> API, this function can be invoked from within a system lock zone by threads only. </dd></dl>

<p>Definition at line <a class="el" href="chsem_8c_source.html#l00264">264</a> of file <a class="el" href="chsem_8c_source.html">chsem.c</a>.</p>

<p>References <a class="el" href="group__scheduler.html#gafac108c3eb9f74fe26cdd41709737058">CH_STATE_WTSEM</a>, <a class="el" href="group__debug.html#ga05556bc6888b5ff5ec4edcaf4830addc">chDbgAssert</a>, <a class="el" href="group__debug.html#ga3d40b3669f5280264c24dae4a2565ff2">chDbgCheck</a>, <a class="el" href="group__debug.html#ga14fe880e1dbd127d46077a1d300b1167">chDbgCheckClassS()</a>, <a class="el" href="group__scheduler.html#ga306e564f678c1a39139639490c77e78b">chSchGoSleepTimeoutS()</a>, <a class="el" href="structch__semaphore.html#aa855718bb5d5fe25ef00938d5f8bce50">ch_semaphore::cnt</a>, <a class="el" href="group__scheduler.html#ga1a5fddde56420e8accd0c09c1abb32a7">currp</a>, <a class="el" href="group__scheduler.html#ga4ff2533d4f42b5b10b6caf648a4619b4">MSG_OK</a>, <a class="el" href="group__scheduler.html#gab1ba7ecdbacc376bc6415d4bc01846ec">MSG_TIMEOUT</a>, <a class="el" href="structch__semaphore.html#af7e3ab25d2bc8771174876f1cae544fb">ch_semaphore::queue</a>, <a class="el" href="group__scheduler.html#gaf2447f9565ba6ddcecc9b5622885ae50">queue_isempty()</a>, <a class="el" href="group__scheduler.html#ga61aefe3e3bf61cad481289ad6b59071e">queue_notempty()</a>, and <a class="el" href="group__time.html#gad1ac15e9e5fc17810a94a779257f3d29">TIME_IMMEDIATE</a>.</p>

<p>Referenced by <a class="el" href="group__binary__semaphores.html#gab19108a1f4b5c01122bfc5f466875124">chBSemWaitTimeoutS()</a>, <a class="el" href="group__pools.html#gac31cc9e2732264cb6fabfbd009968ca1">chGuardedPoolAllocTimeoutS()</a>, and <a class="el" href="group__semaphores.html#ga21a98f5f1c64c8b42d5b07968bae3b77">chSemWaitTimeout()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__semaphores_ga7102a34d788df1a46845b8d794d475f6_cgraph.png" border="0" usemap="#group__semaphores_ga7102a34d788df1a46845b8d794d475f6_cgraph" alt=""/></div>
<map name="group__semaphores_ga7102a34d788df1a46845b8d794d475f6_cgraph" id="group__semaphores_ga7102a34d788df1a46845b8d794d475f6_cgraph">
<area shape="rect" id="node2" href="group__debug.html#ga14fe880e1dbd127d46077a1d300b1167" title="S&#45;class functions context check. " alt="" coords="541,252,657,276"/>
<area shape="rect" id="node4" href="group__scheduler.html#ga306e564f678c1a39139639490c77e78b" title="Puts the current thread to sleep into the specified state with timeout specification. " alt="" coords="176,127,315,151"/>
<area shape="rect" id="node12" href="group__scheduler.html#gaf2447f9565ba6ddcecc9b5622885ae50" title="Evaluates to true if the specified threads queue is empty. " alt="" coords="198,545,293,569"/>
<area shape="rect" id="node14" href="group__scheduler.html#ga61aefe3e3bf61cad481289ad6b59071e" title="Evaluates to true if the specified threads queue is not empty. " alt="" coords="194,424,297,448"/>
<area shape="rect" id="node3" href="group__system.html#gaffab4052111407f092c7c65466a61450" title="Halts the system. " alt="" coords="705,177,775,201"/>
<area shape="rect" id="node5" href="group__scheduler.html#ga97c1c514b755a1e71caf2f19c1ccf986" title="Puts the current thread to sleep into the specified state. " alt="" coords="379,349,477,373"/>
<area shape="rect" id="node8" href="group__time.html#gac9c07e9c8ba8b0128e7be6079358bb08" title="Disables a Virtual Timer. " alt="" coords="382,53,474,77"/>
<area shape="rect" id="node10" href="group__time.html#ga9def2c4036cc27579e206f94a352914d" title="Enables a virtual timer. " alt="" coords="388,101,468,125"/>
<area shape="rect" id="node11" href="group__time.html#ga2053f87d16f49189f092f934b7d2e8d1" title="Returns true if the specified timer is armed. " alt="" coords="383,5,473,29"/>
<area shape="rect" id="node6" href="group__scheduler.html#ga2061d80ce782ea1c9822d158d7ae88b4" title="Removes a thread from a queue and returns it. " alt="" coords="549,472,649,496"/>
<area shape="rect" id="node7" href="group__scheduler.html#gaa664d185361931ac4c38b7b01af92ff2" title="Removes the first&#45;out thread from a queue and returns it. " alt="" coords="542,375,657,399"/>
<area shape="rect" id="node9" href="group__debug.html#ga3e4782dccbb385051e1eb01ac5b05470" title="I&#45;class functions context check. " alt="" coords="543,101,655,125"/>
<area shape="rect" id="node13" href="group__scheduler.html#gab9b2132009ba2cef65d3fca0cfb354ef" title="Pushes a thread_t on top of a stack list. " alt="" coords="395,643,461,667"/>
<area shape="rect" id="node15" href="group__scheduler.html#ga5d015074bf0c8105077bcd986a996f63" title="Determines if the current thread must reschedule. " alt="" coords="363,301,493,325"/>
<area shape="rect" id="node16" href="group__scheduler.html#ga282dd3f6ff79dd20e251e413e2b9915d" title="Inserts a thread into a queue. " alt="" coords="386,595,470,619"/>
<area shape="rect" id="node17" href="group__scheduler.html#gaa29f30122c114fd0ea21e16b68ef1710" title="Removes the last&#45;out thread from a queue and returns it. " alt="" coords="371,448,485,472"/>
<area shape="rect" id="node18" href="group__scheduler.html#ga77b181c31a97a1b724cee544718805fd" title="Inserts a thread into a priority ordered queue. " alt="" coords="374,496,482,520"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga20caa503d05082ff45be32c1dd68bd52"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void chSemSignal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>sp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a signal operation on a semaphore. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sp</td><td>pointer to a <code>semaphore_t</code> structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Normal API, this function can be invoked by regular system threads but not from within a lock zone. </dd></dl>

<p>Definition at line <a class="el" href="chsem_8c_source.html#l00294">294</a> of file <a class="el" href="chsem_8c_source.html">chsem.c</a>.</p>

<p>References <a class="el" href="group__debug.html#ga05556bc6888b5ff5ec4edcaf4830addc">chDbgAssert</a>, <a class="el" href="group__debug.html#ga3d40b3669f5280264c24dae4a2565ff2">chDbgCheck</a>, <a class="el" href="group__scheduler.html#ga270b083660e1f9b48a34570914bebeac">chSchWakeupS()</a>, <a class="el" href="group__system.html#ga464ae8092ca266ea0abffeb4c5639c8e">chSysLock()</a>, <a class="el" href="group__system.html#gae3429d88fe6a75de02af1a089b9f620b">chSysUnlock()</a>, <a class="el" href="structch__semaphore.html#aa855718bb5d5fe25ef00938d5f8bce50">ch_semaphore::cnt</a>, <a class="el" href="group__scheduler.html#ga4ff2533d4f42b5b10b6caf648a4619b4">MSG_OK</a>, <a class="el" href="structch__semaphore.html#af7e3ab25d2bc8771174876f1cae544fb">ch_semaphore::queue</a>, <a class="el" href="group__scheduler.html#gaa664d185361931ac4c38b7b01af92ff2">queue_fifo_remove()</a>, <a class="el" href="group__scheduler.html#gaf2447f9565ba6ddcecc9b5622885ae50">queue_isempty()</a>, and <a class="el" href="group__scheduler.html#ga61aefe3e3bf61cad481289ad6b59071e">queue_notempty()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__semaphores_ga20caa503d05082ff45be32c1dd68bd52_cgraph.png" border="0" usemap="#group__semaphores_ga20caa503d05082ff45be32c1dd68bd52_cgraph" alt=""/></div>
<map name="group__semaphores_ga20caa503d05082ff45be32c1dd68bd52_cgraph" id="group__semaphores_ga20caa503d05082ff45be32c1dd68bd52_cgraph">
<area shape="rect" id="node2" href="group__scheduler.html#ga270b083660e1f9b48a34570914bebeac" title="Wakes up a thread. " alt="" coords="140,395,237,419"/>
<area shape="rect" id="node6" href="group__system.html#ga464ae8092ca266ea0abffeb4c5639c8e" title="Enters the kernel lock state. " alt="" coords="153,443,225,467"/>
<area shape="rect" id="node9" href="group__system.html#gae3429d88fe6a75de02af1a089b9f620b" title="Leaves the kernel lock state. " alt="" coords="147,552,230,576"/>
<area shape="rect" id="node12" href="group__scheduler.html#gaa664d185361931ac4c38b7b01af92ff2" title="Removes the first&#45;out thread from a queue and returns it. " alt="" coords="296,5,411,29"/>
<area shape="rect" id="node13" href="group__scheduler.html#gaf2447f9565ba6ddcecc9b5622885ae50" title="Evaluates to true if the specified threads queue is empty. " alt="" coords="141,631,236,655"/>
<area shape="rect" id="node15" href="group__scheduler.html#ga61aefe3e3bf61cad481289ad6b59071e" title="Evaluates to true if the specified threads queue is not empty. " alt="" coords="137,173,240,197"/>
<area shape="rect" id="node3" href="group__debug.html#ga14fe880e1dbd127d46077a1d300b1167" title="S&#45;class functions context check. " alt="" coords="467,296,583,320"/>
<area shape="rect" id="node4" href="group__scheduler.html#ga74665c643003d2094a5c337a6857035e" title="Inserts a thread in the Ready List placing it behind its peers. " alt="" coords="311,395,396,419"/>
<area shape="rect" id="node5" href="group__debug.html#ga3e4782dccbb385051e1eb01ac5b05470" title="I&#45;class functions context check. " alt="" coords="469,344,581,368"/>
<area shape="rect" id="node7" href="group__debug.html#gaae453ff2b98bb0711c081c0496615250" title="Guard code for chSysLock(). " alt="" coords="302,443,405,467"/>
<area shape="rect" id="node8" href="group__statistics.html#ga813c62177261b1b03a87ba209409b44b" title="Starts the measurement of a thread critical zone. " alt="" coords="291,491,416,527"/>
<area shape="rect" id="node10" href="group__debug.html#gafdb3c25c67ce61bb8ed7a9121365b71c" title="Guard code for chSysUnlock(). " alt="" coords="296,552,411,576"/>
<area shape="rect" id="node11" href="group__statistics.html#gadd818821c119157b1ea6cd399ee4e647" title="Stops the measurement of a thread critical zone. " alt="" coords="291,601,415,637"/>
<area shape="rect" id="node14" href="group__scheduler.html#gab9b2132009ba2cef65d3fca0cfb354ef" title="Pushes a thread_t on top of a stack list. " alt="" coords="320,661,387,685"/>
<area shape="rect" id="node16" href="group__scheduler.html#ga5d015074bf0c8105077bcd986a996f63" title="Determines if the current thread must reschedule. " alt="" coords="288,53,419,77"/>
<area shape="rect" id="node17" href="group__scheduler.html#ga2061d80ce782ea1c9822d158d7ae88b4" title="Removes a thread from a queue and returns it. " alt="" coords="303,197,403,221"/>
<area shape="rect" id="node18" href="group__scheduler.html#ga282dd3f6ff79dd20e251e413e2b9915d" title="Inserts a thread into a queue. " alt="" coords="311,245,395,269"/>
<area shape="rect" id="node19" href="group__scheduler.html#gaa29f30122c114fd0ea21e16b68ef1710" title="Removes the last&#45;out thread from a queue and returns it. " alt="" coords="297,101,410,125"/>
<area shape="rect" id="node20" href="group__scheduler.html#ga77b181c31a97a1b724cee544718805fd" title="Inserts a thread into a priority ordered queue. " alt="" coords="299,149,407,173"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaf379805c91e541ebb778047803bd1cee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void chSemSignalI </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>sp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a signal operation on a semaphore. </p>
<dl class="section post"><dt>Postcondition</dt><dd>This function does not reschedule so a call to a rescheduling function must be performed before unlocking the kernel. Note that interrupt handlers always reschedule on exit so an explicit reschedule must not be performed in ISRs.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sp</td><td>pointer to a <code>semaphore_t</code> structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>This is an <b>I-Class</b> API, this function can be invoked from within a system lock zone by both threads and interrupt handlers. </dd></dl>

<p>Definition at line <a class="el" href="chsem_8c_source.html#l00319">319</a> of file <a class="el" href="chsem_8c_source.html">chsem.c</a>.</p>

<p>References <a class="el" href="group__debug.html#ga05556bc6888b5ff5ec4edcaf4830addc">chDbgAssert</a>, <a class="el" href="group__debug.html#ga3d40b3669f5280264c24dae4a2565ff2">chDbgCheck</a>, <a class="el" href="group__debug.html#ga3e4782dccbb385051e1eb01ac5b05470">chDbgCheckClassI()</a>, <a class="el" href="group__scheduler.html#ga74665c643003d2094a5c337a6857035e">chSchReadyI()</a>, <a class="el" href="structch__semaphore.html#aa855718bb5d5fe25ef00938d5f8bce50">ch_semaphore::cnt</a>, <a class="el" href="group__scheduler.html#ga4ff2533d4f42b5b10b6caf648a4619b4">MSG_OK</a>, <a class="el" href="structch__semaphore.html#af7e3ab25d2bc8771174876f1cae544fb">ch_semaphore::queue</a>, <a class="el" href="group__scheduler.html#gaa664d185361931ac4c38b7b01af92ff2">queue_fifo_remove()</a>, <a class="el" href="group__scheduler.html#gaf2447f9565ba6ddcecc9b5622885ae50">queue_isempty()</a>, <a class="el" href="group__scheduler.html#ga61aefe3e3bf61cad481289ad6b59071e">queue_notempty()</a>, <a class="el" href="structch__thread.html#a1553a02a32b6903a20ed46fbb8e22023">ch_thread::rdymsg</a>, and <a class="el" href="structch__thread.html#accc303ba6a19458cf6a773c3a0b3cc99">ch_thread::u</a>.</p>

<p>Referenced by <a class="el" href="group__binary__semaphores.html#ga57935ef53e9909b1cde01474cb726d4c">chBSemSignalI()</a>, and <a class="el" href="group__pools.html#ga6376e420c14add0334143a4525fe721f">chGuardedPoolFreeI()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__semaphores_gaf379805c91e541ebb778047803bd1cee_cgraph.png" border="0" usemap="#group__semaphores_gaf379805c91e541ebb778047803bd1cee_cgraph" alt=""/></div>
<map name="group__semaphores_gaf379805c91e541ebb778047803bd1cee_cgraph" id="group__semaphores_gaf379805c91e541ebb778047803bd1cee_cgraph">
<area shape="rect" id="node2" href="group__debug.html#ga3e4782dccbb385051e1eb01ac5b05470" title="I&#45;class functions context check. " alt="" coords="300,11,412,35"/>
<area shape="rect" id="node4" href="group__scheduler.html#ga74665c643003d2094a5c337a6857035e" title="Inserts a thread in the Ready List placing it behind its peers. " alt="" coords="149,5,234,29"/>
<area shape="rect" id="node5" href="group__scheduler.html#gaa664d185361931ac4c38b7b01af92ff2" title="Removes the first&#45;out thread from a queue and returns it. " alt="" coords="299,59,413,83"/>
<area shape="rect" id="node6" href="group__scheduler.html#gaf2447f9565ba6ddcecc9b5622885ae50" title="Evaluates to true if the specified threads queue is empty. " alt="" coords="144,275,239,299"/>
<area shape="rect" id="node8" href="group__scheduler.html#ga61aefe3e3bf61cad481289ad6b59071e" title="Evaluates to true if the specified threads queue is not empty. " alt="" coords="140,155,243,179"/>
<area shape="rect" id="node3" href="group__system.html#gaffab4052111407f092c7c65466a61450" title="Halts the system. " alt="" coords="469,11,539,35"/>
<area shape="rect" id="node7" href="group__scheduler.html#gab9b2132009ba2cef65d3fca0cfb354ef" title="Pushes a thread_t on top of a stack list. " alt="" coords="323,347,389,371"/>
<area shape="rect" id="node9" href="group__scheduler.html#ga5d015074bf0c8105077bcd986a996f63" title="Determines if the current thread must reschedule. " alt="" coords="291,299,421,323"/>
<area shape="rect" id="node10" href="group__scheduler.html#ga2061d80ce782ea1c9822d158d7ae88b4" title="Removes a thread from a queue and returns it. " alt="" coords="306,107,406,131"/>
<area shape="rect" id="node11" href="group__scheduler.html#ga282dd3f6ff79dd20e251e413e2b9915d" title="Inserts a thread into a queue. " alt="" coords="314,155,398,179"/>
<area shape="rect" id="node12" href="group__scheduler.html#gaa29f30122c114fd0ea21e16b68ef1710" title="Removes the last&#45;out thread from a queue and returns it. " alt="" coords="299,203,413,227"/>
<area shape="rect" id="node13" href="group__scheduler.html#ga77b181c31a97a1b724cee544718805fd" title="Inserts a thread into a priority ordered queue. " alt="" coords="302,251,410,275"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga06d744fbb04db7269f9620d2e6ef0a44"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void chSemAddCounterI </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cnt_t&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds the specified value to the semaphore counter. </p>
<dl class="section post"><dt>Postcondition</dt><dd>This function does not reschedule so a call to a rescheduling function must be performed before unlocking the kernel. Note that interrupt handlers always reschedule on exit so an explicit reschedule must not be performed in ISRs.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sp</td><td>pointer to a <code>semaphore_t</code> structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>value to be added to the semaphore counter. The value must be positive.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>This is an <b>I-Class</b> API, this function can be invoked from within a system lock zone by both threads and interrupt handlers. </dd></dl>

<p>Definition at line <a class="el" href="chsem_8c_source.html#l00349">349</a> of file <a class="el" href="chsem_8c_source.html">chsem.c</a>.</p>

<p>References <a class="el" href="group__debug.html#ga05556bc6888b5ff5ec4edcaf4830addc">chDbgAssert</a>, <a class="el" href="group__debug.html#ga3d40b3669f5280264c24dae4a2565ff2">chDbgCheck</a>, <a class="el" href="group__debug.html#ga3e4782dccbb385051e1eb01ac5b05470">chDbgCheckClassI()</a>, <a class="el" href="group__scheduler.html#ga74665c643003d2094a5c337a6857035e">chSchReadyI()</a>, <a class="el" href="structch__semaphore.html#aa855718bb5d5fe25ef00938d5f8bce50">ch_semaphore::cnt</a>, <a class="el" href="group__scheduler.html#ga4ff2533d4f42b5b10b6caf648a4619b4">MSG_OK</a>, <a class="el" href="structch__semaphore.html#af7e3ab25d2bc8771174876f1cae544fb">ch_semaphore::queue</a>, <a class="el" href="group__scheduler.html#gaa664d185361931ac4c38b7b01af92ff2">queue_fifo_remove()</a>, <a class="el" href="group__scheduler.html#gaf2447f9565ba6ddcecc9b5622885ae50">queue_isempty()</a>, <a class="el" href="group__scheduler.html#ga61aefe3e3bf61cad481289ad6b59071e">queue_notempty()</a>, <a class="el" href="structch__thread.html#a1553a02a32b6903a20ed46fbb8e22023">ch_thread::rdymsg</a>, and <a class="el" href="structch__thread.html#accc303ba6a19458cf6a773c3a0b3cc99">ch_thread::u</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__semaphores_ga06d744fbb04db7269f9620d2e6ef0a44_cgraph.png" border="0" usemap="#group__semaphores_ga06d744fbb04db7269f9620d2e6ef0a44_cgraph" alt=""/></div>
<map name="group__semaphores_ga06d744fbb04db7269f9620d2e6ef0a44_cgraph" id="group__semaphores_ga06d744fbb04db7269f9620d2e6ef0a44_cgraph">
<area shape="rect" id="node2" href="group__debug.html#ga3e4782dccbb385051e1eb01ac5b05470" title="I&#45;class functions context check. " alt="" coords="329,11,441,35"/>
<area shape="rect" id="node4" href="group__scheduler.html#ga74665c643003d2094a5c337a6857035e" title="Inserts a thread in the Ready List placing it behind its peers. " alt="" coords="178,5,263,29"/>
<area shape="rect" id="node5" href="group__scheduler.html#gaa664d185361931ac4c38b7b01af92ff2" title="Removes the first&#45;out thread from a queue and returns it. " alt="" coords="328,59,443,83"/>
<area shape="rect" id="node6" href="group__scheduler.html#gaf2447f9565ba6ddcecc9b5622885ae50" title="Evaluates to true if the specified threads queue is empty. " alt="" coords="173,275,268,299"/>
<area shape="rect" id="node8" href="group__scheduler.html#ga61aefe3e3bf61cad481289ad6b59071e" title="Evaluates to true if the specified threads queue is not empty. " alt="" coords="169,155,272,179"/>
<area shape="rect" id="node3" href="group__system.html#gaffab4052111407f092c7c65466a61450" title="Halts the system. " alt="" coords="499,11,568,35"/>
<area shape="rect" id="node7" href="group__scheduler.html#gab9b2132009ba2cef65d3fca0cfb354ef" title="Pushes a thread_t on top of a stack list. " alt="" coords="352,347,419,371"/>
<area shape="rect" id="node9" href="group__scheduler.html#ga5d015074bf0c8105077bcd986a996f63" title="Determines if the current thread must reschedule. " alt="" coords="320,299,451,323"/>
<area shape="rect" id="node10" href="group__scheduler.html#ga2061d80ce782ea1c9822d158d7ae88b4" title="Removes a thread from a queue and returns it. " alt="" coords="335,107,435,131"/>
<area shape="rect" id="node11" href="group__scheduler.html#ga282dd3f6ff79dd20e251e413e2b9915d" title="Inserts a thread into a queue. " alt="" coords="343,155,427,179"/>
<area shape="rect" id="node12" href="group__scheduler.html#gaa29f30122c114fd0ea21e16b68ef1710" title="Removes the last&#45;out thread from a queue and returns it. " alt="" coords="329,203,442,227"/>
<area shape="rect" id="node13" href="group__scheduler.html#ga77b181c31a97a1b724cee544718805fd" title="Inserts a thread into a priority ordered queue. " alt="" coords="331,251,439,275"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga120d7454bac6a3a7c7a336353fbf5fca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">msg_t chSemSignalWait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>sps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>spw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs atomic signal and wait operations on two semaphores. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sps</td><td>pointer to a <code>semaphore_t</code> structure to be signaled </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">spw</td><td>pointer to a <code>semaphore_t</code> structure to wait on </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A message specifying how the invoking thread has been released from the semaphore. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MSG_OK</td><td>if the thread has not stopped on the semaphore or the semaphore has been signaled. </td></tr>
    <tr><td class="paramname">MSG_RESET</td><td>if the semaphore has been reset using <code><a class="el" href="group__semaphores.html#ga2c454835402cf7adb27858fdbc50b1f4" title="Performs a reset operation on the semaphore. ">chSemReset()</a></code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Normal API, this function can be invoked by regular system threads but not from within a lock zone. </dd></dl>

<p>Definition at line <a class="el" href="chsem_8c_source.html#l00378">378</a> of file <a class="el" href="chsem_8c_source.html">chsem.c</a>.</p>

<p>References <a class="el" href="group__scheduler.html#gafac108c3eb9f74fe26cdd41709737058">CH_STATE_WTSEM</a>, <a class="el" href="group__debug.html#ga05556bc6888b5ff5ec4edcaf4830addc">chDbgAssert</a>, <a class="el" href="group__debug.html#ga3d40b3669f5280264c24dae4a2565ff2">chDbgCheck</a>, <a class="el" href="group__scheduler.html#ga97c1c514b755a1e71caf2f19c1ccf986">chSchGoSleepS()</a>, <a class="el" href="group__scheduler.html#ga74665c643003d2094a5c337a6857035e">chSchReadyI()</a>, <a class="el" href="group__scheduler.html#ga4e38b4bee3d2330f6a0f1cdb7660af20">chSchRescheduleS()</a>, <a class="el" href="group__system.html#ga464ae8092ca266ea0abffeb4c5639c8e">chSysLock()</a>, <a class="el" href="group__system.html#gae3429d88fe6a75de02af1a089b9f620b">chSysUnlock()</a>, <a class="el" href="structch__semaphore.html#aa855718bb5d5fe25ef00938d5f8bce50">ch_semaphore::cnt</a>, <a class="el" href="group__scheduler.html#ga1a5fddde56420e8accd0c09c1abb32a7">currp</a>, <a class="el" href="group__scheduler.html#ga4ff2533d4f42b5b10b6caf648a4619b4">MSG_OK</a>, <a class="el" href="structch__semaphore.html#af7e3ab25d2bc8771174876f1cae544fb">ch_semaphore::queue</a>, <a class="el" href="group__scheduler.html#gaa664d185361931ac4c38b7b01af92ff2">queue_fifo_remove()</a>, <a class="el" href="group__scheduler.html#gaf2447f9565ba6ddcecc9b5622885ae50">queue_isempty()</a>, <a class="el" href="group__scheduler.html#ga61aefe3e3bf61cad481289ad6b59071e">queue_notempty()</a>, <a class="el" href="structch__thread.html#a1553a02a32b6903a20ed46fbb8e22023">ch_thread::rdymsg</a>, <a class="el" href="structch__thread.html#accc303ba6a19458cf6a773c3a0b3cc99">ch_thread::u</a>, and <a class="el" href="structch__thread.html#ace7b4aa7d1187a91bb26d8109b965122">ch_thread::wtsemp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__semaphores_ga120d7454bac6a3a7c7a336353fbf5fca_cgraph.png" border="0" usemap="#group__semaphores_ga120d7454bac6a3a7c7a336353fbf5fca_cgraph" alt=""/></div>
<map name="group__semaphores_ga120d7454bac6a3a7c7a336353fbf5fca_cgraph" id="group__semaphores_ga120d7454bac6a3a7c7a336353fbf5fca_cgraph">
<area shape="rect" id="node2" href="group__scheduler.html#ga97c1c514b755a1e71caf2f19c1ccf986" title="Puts the current thread to sleep into the specified state. " alt="" coords="167,175,265,199"/>
<area shape="rect" id="node4" href="group__scheduler.html#ga74665c643003d2094a5c337a6857035e" title="Inserts a thread in the Ready List placing it behind its peers. " alt="" coords="355,5,440,29"/>
<area shape="rect" id="node10" href="group__scheduler.html#gaa664d185361931ac4c38b7b01af92ff2" title="Removes the first&#45;out thread from a queue and returns it. " alt="" coords="522,424,637,448"/>
<area shape="rect" id="node11" href="group__scheduler.html#ga4e38b4bee3d2330f6a0f1cdb7660af20" title="Performs a reschedule if a higher priority thread is runnable. " alt="" coords="159,523,273,547"/>
<area shape="rect" id="node14" href="group__system.html#ga464ae8092ca266ea0abffeb4c5639c8e" title="Enters the kernel lock state. " alt="" coords="180,587,252,611"/>
<area shape="rect" id="node17" href="group__system.html#gae3429d88fe6a75de02af1a089b9f620b" title="Leaves the kernel lock state. " alt="" coords="175,715,257,739"/>
<area shape="rect" id="node19" href="group__scheduler.html#gaf2447f9565ba6ddcecc9b5622885ae50" title="Evaluates to true if the specified threads queue is empty. " alt="" coords="169,635,263,659"/>
<area shape="rect" id="node20" href="group__scheduler.html#ga61aefe3e3bf61cad481289ad6b59071e" title="Evaluates to true if the specified threads queue is not empty. " alt="" coords="165,399,267,423"/>
<area shape="rect" id="node3" href="group__debug.html#ga14fe880e1dbd127d46077a1d300b1167" title="S&#45;class functions context check. " alt="" coords="521,547,637,571"/>
<area shape="rect" id="node6" href="group__semaphores.html#gafd391434ff5b76cefc85743bda9f55af" title="Increases the semaphore counter. " alt="" coords="343,53,451,77"/>
<area shape="rect" id="node7" href="group__system.html#gac27f5c62e47e62fbb3585c65110addeb" title="Enters the kernel lock state from within an interrupt handler. " alt="" coords="339,101,455,125"/>
<area shape="rect" id="node8" href="group__system.html#ga459aa0a2901f0b19c7cf1d39172e4f53" title="Leaves the kernel lock state from within an interrupt handler. " alt="" coords="334,149,461,173"/>
<area shape="rect" id="node9" href="group__scheduler.html#ga2061d80ce782ea1c9822d158d7ae88b4" title="Removes a thread from a queue and returns it. " alt="" coords="347,299,447,323"/>
<area shape="rect" id="node5" href="group__debug.html#ga3e4782dccbb385051e1eb01ac5b05470" title="I&#45;class functions context check. " alt="" coords="523,53,635,77"/>
<area shape="rect" id="node12" href="group__scheduler.html#ga6827a67e839462e65b5765ef15709c97" title="Switches to the first thread on the runnable queue. " alt="" coords="321,499,473,523"/>
<area shape="rect" id="node13" href="group__scheduler.html#ga5d015074bf0c8105077bcd986a996f63" title="Determines if the current thread must reschedule. " alt="" coords="332,547,463,571"/>
<area shape="rect" id="node15" href="group__debug.html#gaae453ff2b98bb0711c081c0496615250" title="Guard code for chSysLock(). " alt="" coords="346,645,449,669"/>
<area shape="rect" id="node16" href="group__statistics.html#ga813c62177261b1b03a87ba209409b44b" title="Starts the measurement of a thread critical zone. " alt="" coords="335,694,460,730"/>
<area shape="rect" id="node18" href="group__debug.html#gafdb3c25c67ce61bb8ed7a9121365b71c" title="Guard code for chSysUnlock(). " alt="" coords="340,755,455,779"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gabf1864766da833070d61948d67a190a0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void chSemFastWaitI </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>sp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Decreases the semaphore counter. </p>
<p>This macro can be used when the counter is known to be positive.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sp</td><td>pointer to a <code>semaphore_t</code> structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>This is an <b>I-Class</b> API, this function can be invoked from within a system lock zone by both threads and interrupt handlers. </dd></dl>

<p>Definition at line <a class="el" href="chsem_8h_source.html#l00118">118</a> of file <a class="el" href="chsem_8h_source.html">chsem.h</a>.</p>

<p>References <a class="el" href="group__debug.html#ga3e4782dccbb385051e1eb01ac5b05470">chDbgCheckClassI()</a>, and <a class="el" href="structch__semaphore.html#aa855718bb5d5fe25ef00938d5f8bce50">ch_semaphore::cnt</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__semaphores_gabf1864766da833070d61948d67a190a0_cgraph.png" border="0" usemap="#group__semaphores_gabf1864766da833070d61948d67a190a0_cgraph" alt=""/></div>
<map name="group__semaphores_gabf1864766da833070d61948d67a190a0_cgraph" id="group__semaphores_gabf1864766da833070d61948d67a190a0_cgraph">
<area shape="rect" id="node2" href="group__debug.html#ga3e4782dccbb385051e1eb01ac5b05470" title="I&#45;class functions context check. " alt="" coords="153,5,265,29"/>
<area shape="rect" id="node3" href="group__system.html#gaffab4052111407f092c7c65466a61450" title="Halts the system. " alt="" coords="313,5,383,29"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gafd391434ff5b76cefc85743bda9f55af"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void chSemFastSignalI </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>sp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Increases the semaphore counter. </p>
<p>This macro can be used when the counter is known to be not negative.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sp</td><td>pointer to a <code>semaphore_t</code> structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>This is an <b>I-Class</b> API, this function can be invoked from within a system lock zone by both threads and interrupt handlers. </dd></dl>

<p>Definition at line <a class="el" href="chsem_8h_source.html#l00134">134</a> of file <a class="el" href="chsem_8h_source.html">chsem.h</a>.</p>

<p>References <a class="el" href="group__debug.html#ga3e4782dccbb385051e1eb01ac5b05470">chDbgCheckClassI()</a>, and <a class="el" href="structch__semaphore.html#aa855718bb5d5fe25ef00938d5f8bce50">ch_semaphore::cnt</a>.</p>

<p>Referenced by <a class="el" href="group__scheduler.html#ga97c1c514b755a1e71caf2f19c1ccf986">chSchGoSleepS()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__semaphores_gafd391434ff5b76cefc85743bda9f55af_cgraph.png" border="0" usemap="#group__semaphores_gafd391434ff5b76cefc85743bda9f55af_cgraph" alt=""/></div>
<map name="group__semaphores_gafd391434ff5b76cefc85743bda9f55af_cgraph" id="group__semaphores_gafd391434ff5b76cefc85743bda9f55af_cgraph">
<area shape="rect" id="node2" href="group__debug.html#ga3e4782dccbb385051e1eb01ac5b05470" title="I&#45;class functions context check. " alt="" coords="161,5,273,29"/>
<area shape="rect" id="node3" href="group__system.html#gaffab4052111407f092c7c65466a61450" title="Halts the system. " alt="" coords="321,5,391,29"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga1e697ab9410741a5f8718fc59c3f3e1c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static cnt_t chSemGetCounterI </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>sp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the semaphore counter current value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sp</td><td>pointer to a <code>semaphore_t</code> structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The semaphore counter value.</dd></dl>
<dl class="section user"><dt>Function Class:</dt><dd>This is an <b>I-Class</b> API, this function can be invoked from within a system lock zone by both threads and interrupt handlers. </dd></dl>

<p>Definition at line <a class="el" href="chsem_8h_source.html#l00149">149</a> of file <a class="el" href="chsem_8h_source.html">chsem.h</a>.</p>

<p>References <a class="el" href="group__debug.html#ga3e4782dccbb385051e1eb01ac5b05470">chDbgCheckClassI()</a>, and <a class="el" href="structch__semaphore.html#aa855718bb5d5fe25ef00938d5f8bce50">ch_semaphore::cnt</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__semaphores_ga1e697ab9410741a5f8718fc59c3f3e1c_cgraph.png" border="0" usemap="#group__semaphores_ga1e697ab9410741a5f8718fc59c3f3e1c_cgraph" alt=""/></div>
<map name="group__semaphores_ga1e697ab9410741a5f8718fc59c3f3e1c_cgraph" id="group__semaphores_ga1e697ab9410741a5f8718fc59c3f3e1c_cgraph">
<area shape="rect" id="node2" href="group__debug.html#ga3e4782dccbb385051e1eb01ac5b05470" title="I&#45;class functions context check. " alt="" coords="168,5,280,29"/>
<area shape="rect" id="node3" href="group__system.html#gaffab4052111407f092c7c65466a61450" title="Halts the system. " alt="" coords="328,5,397,29"/>
</map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Apr 17 2018 16:16:58 for ChibiOS/RT by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
